{"ast":null,"code":"var _jsxFileName = \"/home/trungnd2/Downloads/insee-client/src/widget/RealtimePhotoWidget.js\";\nimport React from \"react\";\nimport Modal from \"react-responsive-modal\";\nimport \"react-responsive-modal/styles.css\";\nimport \"../popup/styles.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst owlClass = \"popup\";\nconst ERROR_LOCATION = -1;\nconst SUCCESS_LOCATION = 1;\nconst ERROR_REALTIME_PHOTO = -2;\nconst SUCCESS_REALTIME_PHOTO = 2;\nexport default class RealtimePhotoWidget extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.geoSuccessCallback = position => {\n      this.setState({\n        error: SUCCESS_LOCATION,\n        location: {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        },\n        step: 3\n      });\n    };\n\n    this.geoErrorCallback = error => {\n      this.setState({\n        error: ERROR_LOCATION,\n        errorMsg: error.message\n      });\n    };\n\n    this.onClickOpenCamera = () => {\n      this.inputImgRef.click();\n      this.timeClick = new Date().getTime();\n    };\n\n    this.checkValidLastModified = lastModified => {\n      return lastModified >= this.timeClick;\n    };\n\n    this.onImageChange = event => {\n      if (event.target.files && event.target.files[0]) {\n        let img = event.target.files[0];\n        console.log(img);\n        this.checkValidLastModified(img.lastModified);\n        this.setState({\n          image: URL.createObjectURL(img)\n        });\n      }\n    };\n\n    this.state = {\n      error: 0,\n      errorMsg: null,\n      location: null,\n      step: 3,\n      image: null\n    };\n    this.timeClick = 0;\n  }\n\n  componentDidMount() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.geoSuccessCallback, this.geoErrorCallback);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      open: this.props.open,\n      onClose: () => {},\n      center: true,\n      showCloseIcon: false,\n      styles: {\n        modal: {\n          background: \"rgba(242, 242, 242, 0.94)\",\n          backdropFilter: \"blur(54.3656px)\",\n          borderRadius: \"14px\",\n          padding: \"0\",\n          maxWidth: \"80%\"\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            display: 'none'\n          },\n          ref: e => this.inputImgRef = e,\n          onChange: this.onImageChange,\n          type: \"file\",\n          accept: \"image/*\",\n          capture: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: owlClass,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__wrapper`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${owlClass}__wrapper__title`,\n            children: \"Realtime Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `${owlClass}__wrapper__desc`,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"1. Ch\\u1EA5p nh\\u1EADn chia s\\u1EBD v\\u1ECB tr\\xED hi\\u1EC7n t\\u1EA1i \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"2. Ch\\u1EE5p \\u1EA3nh tr\\u1EF1c ti\\u1EBFp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.image && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photo-upload-item\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.state.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__group-btn`,\n          children: [this.state.step == 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${owlClass}__group-btn__item right ${this.state.error == SUCCESS_LOCATION ? 'btn-active' : 'btn-disable'}`,\n            onClick: this.onClickOpenCamera,\n            children: \"Ch\\u1EE5p \\u1EA3nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this), this.state.step == 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${owlClass}__group-btn__item right btn-active`,\n              onClick: () => {},\n              children: \"G\\u1EE7i \\u1EA3nh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${owlClass}__group-btn__item right `,\n              onClick: this.onClickOpenCamera,\n              children: \"Ch\\u1EE5p l\\u1EA1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/trungnd2/Downloads/insee-client/src/widget/RealtimePhotoWidget.js"],"names":["React","Modal","owlClass","ERROR_LOCATION","SUCCESS_LOCATION","ERROR_REALTIME_PHOTO","SUCCESS_REALTIME_PHOTO","RealtimePhotoWidget","PureComponent","constructor","props","geoSuccessCallback","position","setState","error","location","latitude","coords","longitude","step","geoErrorCallback","errorMsg","message","onClickOpenCamera","inputImgRef","click","timeClick","Date","getTime","checkValidLastModified","lastModified","onImageChange","event","target","files","img","console","log","image","URL","createObjectURL","state","componentDidMount","navigator","geolocation","getCurrentPosition","render","open","modal","background","backdropFilter","borderRadius","padding","maxWidth","display","e"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAO,mCAAP;AACA,OAAO,sBAAP;;;AAGA,MAAMC,QAAQ,GAAG,OAAjB;AACA,MAAMC,cAAc,GAAG,CAAC,CAAxB;AACA,MAAMC,gBAAgB,GAAG,CAAzB;AACA,MAAMC,oBAAoB,GAAG,CAAC,CAA9B;AACA,MAAMC,sBAAsB,GAAG,CAA/B;AACA,eAAe,MAAMC,mBAAN,SAAkCP,KAAK,CAACQ,aAAxC,CAAsD;AAEjEC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAYnBC,kBAZmB,GAYGC,QAAD,IAAc;AAC/B,WAAKC,QAAL,CAAc;AACVC,QAAAA,KAAK,EAAEV,gBADG;AACeW,QAAAA,QAAQ,EAAE;AAC/BC,UAAAA,QAAQ,EAAEJ,QAAQ,CAACK,MAAT,CAAgBD,QADK;AAE/BE,UAAAA,SAAS,EAAEN,QAAQ,CAACK,MAAT,CAAgBC;AAFI,SADzB;AAKVC,QAAAA,IAAI,EAAE;AALI,OAAd;AAOH,KApBkB;;AAAA,SAsBnBC,gBAtBmB,GAsBCN,KAAD,IAAW;AAC1B,WAAKD,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAEX,cAAT;AAAyBkB,QAAAA,QAAQ,EAAEP,KAAK,CAACQ;AAAzC,OAAd;AACH,KAxBkB;;AAAA,SAgCnBC,iBAhCmB,GAgCC,MAAM;AACtB,WAAKC,WAAL,CAAiBC,KAAjB;AACA,WAAKC,SAAL,GAAiB,IAAIC,IAAJ,GAAWC,OAAX,EAAjB;AACH,KAnCkB;;AAAA,SAqCnBC,sBArCmB,GAqCOC,YAAD,IAAkB;AACvC,aAAOA,YAAY,IAAI,KAAKJ,SAA5B;AACH,KAvCkB;;AAAA,SAyCnBK,aAzCmB,GAyCHC,KAAK,IAAI;AACrB,UAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,IAAsBF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAA1B,EAAiD;AAC7C,YAAIC,GAAG,GAAGH,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAV;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,aAAKN,sBAAL,CAA4BM,GAAG,CAACL,YAAhC;AACA,aAAKjB,QAAL,CAAc;AACVyB,UAAAA,KAAK,EAAEC,GAAG,CAACC,eAAJ,CAAoBL,GAApB;AADG,SAAd;AAGH;AACJ,KAlDkB;;AAEf,SAAKM,KAAL,GAAa;AACT3B,MAAAA,KAAK,EAAE,CADE;AAETO,MAAAA,QAAQ,EAAE,IAFD;AAGTN,MAAAA,QAAQ,EAAE,IAHD;AAITI,MAAAA,IAAI,EAAE,CAJG;AAKTmB,MAAAA,KAAK,EAAE;AALE,KAAb;AAOA,SAAKZ,SAAL,GAAiB,CAAjB;AACH;;AAgBDgB,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,SAAS,CAACC,WAAd,EAA2B;AACvBD,MAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC,KAAKlC,kBAA9C,EAAkE,KAAKS,gBAAvE;AACH;AACJ;;AAsBD0B,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,KAAD;AACI,MAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWqC,IADrB;AAEI,MAAA,OAAO,EAAE,MAAM,CAAG,CAFtB;AAGI,MAAA,MAAM,MAHV;AAII,MAAA,aAAa,EAAE,KAJnB;AAKI,MAAA,MAAM,EAAE;AACJC,QAAAA,KAAK,EAAE;AACHC,UAAAA,UAAU,EAAE,2BADT;AAEHC,UAAAA,cAAc,EAAE,iBAFb;AAGHC,UAAAA,YAAY,EAAE,MAHX;AAIHC,UAAAA,OAAO,EAAE,GAJN;AAKHC,UAAAA,QAAQ,EAAE;AALP;AADH,OALZ;AAAA,8BAeI;AAAA,+BACI;AAAO,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAd;AAAmC,UAAA,GAAG,EAAEC,CAAC,IAAI,KAAK/B,WAAL,GAAmB+B,CAAhE;AAAmE,UAAA,QAAQ,EAAE,KAAKxB,aAAlF;AAAiG,UAAA,IAAI,EAAC,MAAtG;AAA6G,UAAA,MAAM,EAAC,SAApH;AAA8H,UAAA,OAAO;AAArI;AAAA;AAAA;AAAA;AAAA;AADJ,uBAfJ,eAkBI;AAAK,QAAA,SAAS,EAAE7B,QAAhB;AAAA,gCACI;AAAK,UAAA,SAAS,EAAG,GAAEA,QAAS,WAA5B;AAAA,kCACI;AAAK,YAAA,SAAS,EAAG,GAAEA,QAAS,kBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAG,YAAA,SAAS,EAAG,GAAEA,QAAS,iBAA1B;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eASI;AAAA,oBACK,KAAKuC,KAAL,CAAWH,KAAX,iBACG;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,mCACI;AAAK,cAAA,GAAG,EAAE,KAAKG,KAAL,CAAWH;AAArB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFR;AAAA;AAAA;AAAA;AAAA,gBATJ,eAgBI;AAAK,UAAA,SAAS,EAAG,GAAEpC,QAAS,aAA5B;AAAA,qBACK,KAAKuC,KAAL,CAAWtB,IAAX,IAAmB,CAAnB,iBACG;AACI,YAAA,SAAS,EAAG,GAAEjB,QAAS,2BAA0B,KAAKuC,KAAL,CAAW3B,KAAX,IAAoBV,gBAApB,GAAuC,YAAvC,GAAsD,aAAc,EADzH;AAEI,YAAA,OAAO,EAAE,KAAKmB,iBAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFR,EASK,KAAKkB,KAAL,CAAWtB,IAAX,IAAmB,CAAnB,iBACG;AAAA,oCACI;AACI,cAAA,SAAS,EAAG,GAAEjB,QAAS,oCAD3B;AAEI,cAAA,OAAO,EAAE,MAAM,CAAG,CAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAOI;AACI,cAAA,SAAS,EAAG,GAAEA,QAAS,0BAD3B;AAEI,cAAA,OAAO,EAAE,KAAKqB,iBAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPJ;AAAA,0BAVR;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAgEH;;AAvHgE","sourcesContent":["import React from \"react\";\nimport Modal from \"react-responsive-modal\";\nimport \"react-responsive-modal/styles.css\";\nimport \"../popup/styles.scss\";\n\n\nconst owlClass = \"popup\";\nconst ERROR_LOCATION = -1;\nconst SUCCESS_LOCATION = 1;\nconst ERROR_REALTIME_PHOTO = -2;\nconst SUCCESS_REALTIME_PHOTO = 2;\nexport default class RealtimePhotoWidget extends React.PureComponent {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            error: 0,\n            errorMsg: null,\n            location: null,\n            step: 3,\n            image: null,\n        }\n        this.timeClick = 0;\n    }\n\n    geoSuccessCallback = (position) => {\n        this.setState({\n            error: SUCCESS_LOCATION, location: {\n                latitude: position.coords.latitude,\n                longitude: position.coords.longitude\n            },\n            step: 3\n        })\n    }\n\n    geoErrorCallback = (error) => {\n        this.setState({ error: ERROR_LOCATION, errorMsg: error.message })\n    }\n\n    componentDidMount() {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(this.geoSuccessCallback, this.geoErrorCallback);\n        }\n    }\n\n    onClickOpenCamera = () => {\n        this.inputImgRef.click()\n        this.timeClick = new Date().getTime();\n    }\n\n    checkValidLastModified = (lastModified) => {\n        return lastModified >= this.timeClick;\n    }\n\n    onImageChange = event => {\n        if (event.target.files && event.target.files[0]) {\n            let img = event.target.files[0];\n            console.log(img)\n            this.checkValidLastModified(img.lastModified)\n            this.setState({\n                image: URL.createObjectURL(img)\n            });\n        }\n    };\n\n    render() {\n        return (\n            <Modal\n                open={this.props.open}\n                onClose={() => { }}\n                center\n                showCloseIcon={false}\n                styles={{\n                    modal: {\n                        background: \"rgba(242, 242, 242, 0.94)\",\n                        backdropFilter: \"blur(54.3656px)\",\n                        borderRadius: \"14px\",\n                        padding: \"0\",\n                        maxWidth: \"80%\"\n                    },\n                }}\n            >\n                <>\n                    <input style={{ display: 'none' }} ref={e => this.inputImgRef = e} onChange={this.onImageChange} type=\"file\" accept=\"image/*\" capture></input>\n                </>\n                <div className={owlClass}>\n                    <div className={`${owlClass}__wrapper`}>\n                        <div className={`${owlClass}__wrapper__title`}>Realtime Photo</div>\n                        <p className={`${owlClass}__wrapper__desc`}>\n                            <span>1. Chấp nhận chia sẽ vị trí hiện tại </span>\n                            <br />\n                            <span>2. Chụp ảnh trực tiếp</span>\n                        </p>\n                    </div>\n                    <div>\n                        {this.state.image &&\n                            <div className=\"photo-upload-item\">\n                                <img src={this.state.image} />\n                            </div>\n                        }\n                    </div>\n                    <div className={`${owlClass}__group-btn`}>\n                        {this.state.step == 2 &&\n                            <div\n                                className={`${owlClass}__group-btn__item right ${this.state.error == SUCCESS_LOCATION ? 'btn-active' : 'btn-disable'}`}\n                                onClick={this.onClickOpenCamera}\n                            >\n                                Chụp ảnh\n                            </div>\n                        }\n                        {this.state.step == 3 &&\n                            <>\n                                <div\n                                    className={`${owlClass}__group-btn__item right btn-active`}\n                                    onClick={() => { }}\n                                >\n                                    Gủi ảnh\n                                </div>\n                                <div\n                                    className={`${owlClass}__group-btn__item right `}\n                                    onClick={this.onClickOpenCamera}\n                                >\n                                    Chụp lại\n                                </div>\n                            </>\n                        }\n                    </div>\n                </div>\n            </Modal>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}
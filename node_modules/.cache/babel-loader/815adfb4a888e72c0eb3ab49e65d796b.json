{"ast":null,"code":"var _jsxFileName = \"/home/trungnd2/Downloads/insee-client/src/App.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable jsx-a11y/anchor-has-content */\nimport { useEffect, useState } from \"react\";\nimport BottomSheet from \"./bottom-sheet\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport OAModel from \"./model/OAModel\";\nimport LangUtil from './utils/LangUtil';\nimport ListArticle from \"./article\";\nimport NativeModel from \"./model/NativeModel\";\nimport GlobalModel from \"./model/GlobalModel\";\nimport \"./resource/App.scss\";\nimport { Popup, ErrorPopup, OutAppPopup } from \"./popup\";\nimport TrackingModel from \"./model/TrackingModel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst owlClass = \"App\";\n\nconst Empty = ({\n  openProfileOA\n}) => {\n  const owlClass = \"empty\";\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: owlClass,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://stc-zoa-profile.zdn.vn/images/warning.svg\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `${owlClass}__text`,\n        children: LangUtil.get('oa-disabled')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_c = Empty;\n\nconst ThreeDots = ({\n  isFollowed,\n  onOpenPopupUnFollow,\n  oaid,\n  name,\n  isShowCallBtn,\n  msgCall\n}) => {\n  const items = [{\n    text: LangUtil.get('share-oa-to-friend'),\n    onClick: () => NativeModel.openShareSheet(oaid)\n  }, {\n    text: LangUtil.get('view-qr-code-oa'),\n    onClick: () => NativeModel.openQR(oaid, name)\n  }];\n  isShowCallBtn && items.splice(0, 0, {\n    text: LangUtil.get('lb-call'),\n    onClick: () => NativeModel.callToOA(oaid, msgCall)\n  });\n  return /*#__PURE__*/_jsxDEV(MuiThemeProvider, {\n    children: /*#__PURE__*/_jsxDEV(BottomSheet, {\n      items: isFollowed ? [...items, {\n        text: LangUtil.get('label-unfollow-oa'),\n        onClick: () => onOpenPopupUnFollow()\n      }, {\n        text: LangUtil.get('label-report-oa'),\n        color: \"#FE5050\",\n        onClick: () => NativeModel.reportAbuse(oaid)\n      }] : [...items, {\n        text: LangUtil.get('report'),\n        color: \"#FE5050\",\n        onClick: () => NativeModel.reportAbuse(oaid)\n      }],\n      startHidden: true,\n      element: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://stc-zoa-profile.zdn.vn/images/three-dots.svg\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = ThreeDots;\n\nfunction App() {\n  _s();\n\n  const [oa, setOA] = useState();\n  const [isEmpty, setIsEmpty] = useState(true);\n  const [isFollowed, setIsFollowed] = useState(false);\n  const [isShowCertificationText, setIsShowCertificationText] = useState(false);\n  const [isSeeMore, setIsSeeMore] = useState(true);\n  const [isOpenPopupUnFollow, setIsOpenPopupUnFollow] = useState(false);\n  const [isShowOutappPopup, setIsShowOutappPopup] = useState(false);\n  const [errorMsg, setErrorMsg] = useState({\n    error: 0,\n    msg: ''\n  });\n  const [isShowBtnLoadMoreDesc, setIsShowBtnLoadMoreDesc] = useState(false);\n  const [isShowCallBtn, setIsShowCallBtn] = useState(false);\n\n  const onOpenPopupUnFollow = () => setIsOpenPopupUnFollow(true);\n\n  const onClosePopupUnFollow = () => setIsOpenPopupUnFollow(false);\n\n  const onAgreeOpenZalo = oaid => {\n    setIsShowOutappPopup(false);\n    window.location.href = \"https://zalo.me/\" + oaid;\n  };\n\n  const fetchProfile = oaid => {\n    OAModel.getProfile(oaid).then(resp => {\n      if (resp.error == 0) {\n        let oa = resp.data;\n\n        if (oa.is_disabled) {\n          setIsEmpty(true);\n        } else {\n          setIsEmpty(false);\n        }\n\n        setOA(oa);\n        setIsFollowed(oa.status == 0);\n        isShouldShowCallBtn(oa);\n      }\n    });\n  };\n\n  const followOA = (oaid, continuteUrl) => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true);\n      return;\n    }\n\n    setIsFollowed(true);\n    OAModel.follow(oaid, continuteUrl).then(resp => {\n      if (resp.error >= 0) {\n        if (resp.data && resp.data.is_can_redirect) {\n          window.location.href = continuteUrl;\n        } else {\n          setIsFollowed(true);\n          let appId = GlobalModel.getAppId();\n          NativeModel.openChat(oaid, appId);\n        }\n      } else {\n        if (resp.error == -20 || resp.error == -21 || resp.error == -22) {\n          NativeModel.followOA(oaid, e => {\n            try {\n              if (e[\"error_code\"] >= 0) {\n                setIsFollowed(true);\n                let appId = GlobalModel.getAppId();\n                NativeModel.openChat(oaid, appId);\n              } else {\n                setIsFollowed(false);\n                var msg = LangUtil.toErrorMsg(-1);\n                setErrorMsg({\n                  error: error_code,\n                  msg: msg\n                });\n              }\n            } catch (e) {\n              setIsFollowed(false); //Show error\n            }\n          });\n        } else {\n          setIsFollowed(false);\n          var error_code = resp.error;\n          var msg = LangUtil.toErrorMsg(error_code);\n          setErrorMsg({\n            error: error_code,\n            msg: msg\n          });\n        }\n      }\n    });\n  };\n\n  const unfollowOA = oaid => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true);\n      return;\n    }\n\n    OAModel.unfollow(oaid).then(resp => {\n      if (resp.error >= 0) {\n        setIsFollowed(false);\n      } else {//show error\n      }\n    });\n  };\n\n  const sendMsg = oaid => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true);\n      return;\n    }\n\n    TrackingModel.clickSmallMSGBtn(oaid);\n    let appId = GlobalModel.getAppId();\n    NativeModel.openChat(oaid, appId);\n  };\n\n  const click2Menu = (menu, oaid) => {\n    switch (menu.type) {\n      case 10:\n        {\n          if (menu.value.startsWith(\"https://zalo.me/app/link/zapps/\") || menu.value.startsWith(\"http://zalo.me/app/link/zapps/\")) {\n            NativeModel.openMiniApp(menu.value);\n          } else {\n            window.location.href = menu.value;\n          }\n\n          break;\n        }\n\n      case 53:\n        {\n          var json = JSON.parse(menu.value);\n          window.open(`tel:${json.phoneCode}`);\n          break;\n        }\n\n      case 21:\n        {\n          OAModel.call2Menu(menu.id, oaid).then(resp => {\n            if (resp.error == 0) {\n              let appId = GlobalModel.getAppId();\n              NativeModel.openChat(oaid, appId);\n            } else {\n              var msg = LangUtil.toErrorMsg(-100);\n              setErrorMsg({\n                error: -100,\n                msg: msg\n              });\n            }\n          });\n          break;\n        }\n    }\n  };\n\n  const isShowButtonLoadMore = () => {\n    setTimeout(() => {\n      var element = document.getElementById('desc-box');\n\n      if (element) {\n        if (element.offsetHeight < element.scrollHeight || element.offsetWidth < element.scrollWidth) {\n          setIsShowBtnLoadMoreDesc(true);\n        } else {\n          setIsShowBtnLoadMoreDesc(false);\n        }\n      }\n    }, 500);\n  };\n\n  const isShouldShowCallBtn = oa => {\n    if (GlobalModel.isSupportCallOa() && oa.is_can_call && oa.call_msg) {\n      setIsShowCallBtn(true);\n    }\n  };\n\n  useEffect(() => {\n    NativeModel.offMenu();\n    NativeModel.disableWebviewCheckError();\n    var oa = GlobalModel.getOA();\n\n    if (oa) {\n      setIsFollowed(oa.status == 0);\n      setIsEmpty(false);\n      setOA(oa);\n\n      if (oa.is_disabled) {\n        setIsEmpty(true);\n      }\n\n      fetchProfile(oa.oaid);\n      isShowButtonLoadMore();\n    }\n  }, []);\n\n  if (!oa) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: owlClass,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: `${owlClass}__image`,\n      src: oa.cover,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${owlClass}__shop`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${owlClass}__shop__left`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__shop__left__avatar`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: oa.avatar,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__shop__left__info`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${owlClass}__shop__left__info__company`,\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: `${owlClass}__shop__left__info__company__name`,\n              children: oa.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), oa.is_verified && /*#__PURE__*/_jsxDEV(\"img\", {\n              className: `${owlClass}__shop__left__info__company__verification`,\n              src: \"https://stc-zoa-profile.zdn.vn/images/verification.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), oa.cate && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${owlClass}__shop__left__info__enterprise`,\n            children: LangUtil.getCateName(oa.cate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), !isEmpty && /*#__PURE__*/_jsxDEV(ThreeDots, {\n        isFollowed: isFollowed,\n        onOpenPopupUnFollow: onOpenPopupUnFollow,\n        oaid: oa.oaid,\n        name: oa.name,\n        isShowCallBtn: isShowCallBtn,\n        msgCall: oa.call_msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), errorMsg.error < 0 && /*#__PURE__*/_jsxDEV(ErrorPopup, {\n      open: errorMsg.error < 0,\n      msg: errorMsg.msg,\n      onCloseModal: () => {\n        setErrorMsg({\n          error: 0,\n          msg: ''\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 30\n    }, this), isShowOutappPopup && /*#__PURE__*/_jsxDEV(OutAppPopup, {\n      open: isShowOutappPopup,\n      onCloseModal: () => {\n        setIsShowOutappPopup(false);\n      },\n      onAgree: () => {\n        onAgreeOpenZalo(oa.oaid);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 29\n    }, this), isEmpty && /*#__PURE__*/_jsxDEV(Empty, {\n      openProfileOA: () => setIsEmpty(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 19\n    }, this), !isEmpty && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${owlClass}__group-btn`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            sendMsg(oa.oaid);\n          },\n          className: `${owlClass}__group-btn__item`,\n          children: LangUtil.get('btn-label-send-msg')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this), isFollowed ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${owlClass}__group-btn__item followed`,\n            onClick: onOpenPopupUnFollow,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '50px',\n                height: '40px'\n              },\n              src: \"https://stc-zoa-profile.zdn.vn/images/followed.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Popup, {\n            oaName: oa.name,\n            open: isOpenPopupUnFollow,\n            onCloseModal: onClosePopupUnFollow,\n            onAgree: () => {\n              onClosePopupUnFollow();\n              unfollowOA(oa.oaid);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__group-btn__item follow`,\n          onClick: () => followOA(oa.oaid, ''),\n          children: LangUtil.get('label-follow-oa')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${owlClass}__detail`,\n        children: [oa.address && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__detail__item`,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://stc-zoa-profile.zdn.vn/images/location.svg\",\n            alt: \"\",\n            onClick: () => setIsShowCertificationText(!isShowCertificationText)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `${owlClass}__detail__item__text`,\n            children: oa.address.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 15\n        }, this), oa.phone && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${owlClass}__detail__item`,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://stc-zoa-profile.zdn.vn/images/phone.svg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => window.open(`tel:${oa.phone}`),\n            className: `${owlClass}__detail__item__text primary`,\n            children: oa.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), oa.articles && /*#__PURE__*/_jsxDEV(ListArticle, {\n        oaid: oa.oaid,\n        data: oa.articles\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"FDHQcHMUKNsWNl3N7ICDPTSEBss=\");\n\n_c3 = App;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Empty\");\n$RefreshReg$(_c2, \"ThreeDots\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/home/trungnd2/Downloads/insee-client/src/App.tsx"],"names":["useEffect","useState","BottomSheet","MuiThemeProvider","OAModel","LangUtil","ListArticle","NativeModel","GlobalModel","Popup","ErrorPopup","OutAppPopup","TrackingModel","owlClass","Empty","openProfileOA","get","ThreeDots","isFollowed","onOpenPopupUnFollow","oaid","name","isShowCallBtn","msgCall","items","text","onClick","openShareSheet","openQR","splice","callToOA","color","reportAbuse","App","oa","setOA","isEmpty","setIsEmpty","setIsFollowed","isShowCertificationText","setIsShowCertificationText","isSeeMore","setIsSeeMore","isOpenPopupUnFollow","setIsOpenPopupUnFollow","isShowOutappPopup","setIsShowOutappPopup","errorMsg","setErrorMsg","error","msg","isShowBtnLoadMoreDesc","setIsShowBtnLoadMoreDesc","setIsShowCallBtn","onClosePopupUnFollow","onAgreeOpenZalo","window","location","href","fetchProfile","getProfile","then","resp","data","is_disabled","status","isShouldShowCallBtn","followOA","continuteUrl","isOpenOutApp","follow","is_can_redirect","appId","getAppId","openChat","e","toErrorMsg","error_code","unfollowOA","unfollow","sendMsg","clickSmallMSGBtn","click2Menu","menu","type","value","startsWith","openMiniApp","json","JSON","parse","open","phoneCode","call2Menu","id","isShowButtonLoadMore","setTimeout","element","document","getElementById","offsetHeight","scrollHeight","offsetWidth","scrollWidth","isSupportCallOa","is_can_call","call_msg","offMenu","disableWebviewCheckError","getOA","cover","avatar","is_verified","cate","getCateName","width","height","address","phone","articles"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-has-content */\nimport { useEffect, useState } from \"react\";\n\nimport BottomSheet from \"./bottom-sheet\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport OAModel from \"./model/OAModel\";\nimport LangUtil from './utils/LangUtil';\nimport ListArticle from \"./article\";\nimport NativeModel from \"./model/NativeModel\";\nimport GlobalModel from \"./model/GlobalModel\";\n\nimport { Menu, OA } from './interface/index'\n\n\n\nimport \"./resource/App.scss\";\nimport { Popup, ErrorPopup, OutAppPopup } from \"./popup\";\nimport { StatusStore } from \"./component\";\nimport TrackingModel from \"./model/TrackingModel\";\nconst owlClass = \"App\";\n\n\nconst Empty = ({ openProfileOA }: any) => {\n  const owlClass = \"empty\";\n  return (\n    <>\n      <div className={owlClass}>\n        <img src=\"https://stc-zoa-profile.zdn.vn/images/warning.svg\" alt=\"\" />\n        <p className={`${owlClass}__text`}>{LangUtil.get('oa-disabled')}</p>\n      </div>\n    </>\n  );\n};\n\nconst ThreeDots = ({ isFollowed, onOpenPopupUnFollow, oaid, name, isShowCallBtn, msgCall }: any) => {\n  const items = [\n    {\n      text: LangUtil.get('share-oa-to-friend'),\n      onClick: () => NativeModel.openShareSheet(oaid),\n    },\n    {\n      text: LangUtil.get('view-qr-code-oa'),\n      onClick: () => NativeModel.openQR(oaid, name),\n    },\n  ];\n  isShowCallBtn && items.splice(0, 0, {\n    text: LangUtil.get('lb-call'),\n    onClick: () => NativeModel.callToOA(oaid, msgCall),\n  });\n  return (\n    <MuiThemeProvider>\n      <BottomSheet\n        items={\n          isFollowed\n            ? [\n              ...items,\n              {\n                text: LangUtil.get('label-unfollow-oa'),\n                onClick: () => onOpenPopupUnFollow(),\n              },\n              {\n                text: LangUtil.get('label-report-oa'),\n                color: \"#FE5050\",\n                onClick: () => NativeModel.reportAbuse(oaid),\n              },\n            ]\n            : [\n              ...items,\n              {\n                text: LangUtil.get('report'),\n                color: \"#FE5050\",\n                onClick: () => NativeModel.reportAbuse(oaid),\n              },\n            ]\n        }\n        startHidden={true}\n        element={\n          <img src=\"https://stc-zoa-profile.zdn.vn/images/three-dots.svg\" alt=\"\" />\n        }\n      />\n    </MuiThemeProvider>\n  );\n};\n\nfunction App() {\n  const [oa, setOA] = useState<OA>()\n  const [isEmpty, setIsEmpty] = useState(true);\n  const [isFollowed, setIsFollowed] = useState(false);\n  const [isShowCertificationText, setIsShowCertificationText] = useState(false);\n  const [isSeeMore, setIsSeeMore] = useState(true);\n  const [isOpenPopupUnFollow, setIsOpenPopupUnFollow] = useState(false);\n  const [isShowOutappPopup, setIsShowOutappPopup] = useState(false);\n  const [errorMsg, setErrorMsg] = useState({ error: 0, msg: '' });\n  const [isShowBtnLoadMoreDesc, setIsShowBtnLoadMoreDesc] = useState(false);\n  const [isShowCallBtn, setIsShowCallBtn] = useState(false);\n\n\n  const onOpenPopupUnFollow = () => setIsOpenPopupUnFollow(true);\n  const onClosePopupUnFollow = () => setIsOpenPopupUnFollow(false);\n  const onAgreeOpenZalo = (oaid: string) => {\n    setIsShowOutappPopup(false);\n    window.location.href = \"https://zalo.me/\" + oaid;\n  }\n\n  const fetchProfile = (oaid: string) => {\n    OAModel.getProfile(oaid)\n      .then(resp => {\n        if (resp.error == 0) {\n          let oa = resp.data;\n          if (oa.is_disabled) {\n            setIsEmpty(true)\n          } else {\n            setIsEmpty(false)\n          }\n          setOA(oa)\n          setIsFollowed(oa.status == 0)\n          isShouldShowCallBtn(oa)\n        }\n      })\n  }\n\n  const followOA = (oaid: string, continuteUrl: string) => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true)\n      return;\n    }\n\n    setIsFollowed(true)\n    OAModel.follow(oaid, continuteUrl)\n      .then(resp => {\n        if (resp.error >= 0) {\n          if (resp.data && resp.data.is_can_redirect) {\n            window.location.href = continuteUrl;\n          } else {\n            setIsFollowed(true)\n            let appId = GlobalModel.getAppId();\n            NativeModel.openChat(oaid, appId);\n          }\n\n        } else {\n          if (resp.error == -20 || resp.error == -21 || resp.error == -22) {\n            NativeModel.followOA(oaid, (e: any) => {\n              try {\n                if (e[\"error_code\"] >= 0) {\n                  setIsFollowed(true)\n                  let appId = GlobalModel.getAppId();\n                  NativeModel.openChat(oaid, appId);\n                } else {\n                  setIsFollowed(false)\n                  var msg = LangUtil.toErrorMsg(-1);\n                  setErrorMsg({ error: error_code, msg: msg })\n\n                }\n              } catch (e) {\n                setIsFollowed(false)\n                //Show error\n              }\n            })\n          } else {\n            setIsFollowed(false)\n            var error_code = resp.error;\n            var msg = LangUtil.toErrorMsg(error_code);\n            setErrorMsg({ error: error_code, msg: msg })\n          }\n        }\n      });\n  }\n\n  const unfollowOA = (oaid: string) => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true)\n      return;\n    }\n    OAModel.unfollow(oaid)\n      .then(resp => {\n        if (resp.error >= 0) {\n          setIsFollowed(false)\n        } else {\n          //show error\n        }\n      })\n  }\n\n  const sendMsg = (oaid: string) => {\n    if (GlobalModel.isOpenOutApp()) {\n      setIsShowOutappPopup(true)\n      return;\n    }\n    TrackingModel.clickSmallMSGBtn(oaid)\n    let appId = GlobalModel.getAppId();\n    NativeModel.openChat(oaid, appId)\n  }\n\n  const click2Menu = (menu: Menu, oaid: string) => {\n    switch (menu.type) {\n      case 10: {\n        if (menu.value.startsWith(\"https://zalo.me/app/link/zapps/\") || menu.value.startsWith(\"http://zalo.me/app/link/zapps/\")) {\n          NativeModel.openMiniApp(menu.value);\n        } else {\n          window.location.href = menu.value\n        }\n        break;\n      }\n      case 53: {\n        var json = JSON.parse(menu.value)\n        window.open(`tel:${json.phoneCode}`)\n        break;\n      }\n      case 21: {\n        OAModel.call2Menu(menu.id, oaid)\n          .then(resp => {\n            if (resp.error == 0) {\n              let appId = GlobalModel.getAppId();\n              NativeModel.openChat(oaid, appId)\n            } else {\n              var msg = LangUtil.toErrorMsg(-100);\n              setErrorMsg({ error: -100, msg: msg })\n            }\n          })\n        break;\n      }\n    }\n  }\n\n  const isShowButtonLoadMore = () => {\n    setTimeout(() => {\n      var element = document.getElementById('desc-box');\n      if (element) {\n        if (element.offsetHeight < element.scrollHeight ||\n          element.offsetWidth < element.scrollWidth) {\n          setIsShowBtnLoadMoreDesc(true);\n        } else {\n          setIsShowBtnLoadMoreDesc(false)\n        }\n      }\n    }, 500);\n  }\n\n  const isShouldShowCallBtn = (oa: OA) => {\n    if (GlobalModel.isSupportCallOa() && oa.is_can_call && oa.call_msg) {\n      setIsShowCallBtn(true)\n    }\n  }\n\n  useEffect(() => {\n    NativeModel.offMenu()\n    NativeModel.disableWebviewCheckError()\n    var oa = GlobalModel.getOA();\n    if (oa) {\n      setIsFollowed(oa.status == 0)\n      setIsEmpty(false)\n      setOA(oa)\n      if (oa.is_disabled) {\n        setIsEmpty(true)\n      }\n      fetchProfile(oa.oaid)\n      isShowButtonLoadMore()\n    }\n  }, [])\n\n  if (!oa) {\n    return <div></div>\n  }\n  return (\n    <div className={owlClass}>\n      <img className={`${owlClass}__image`} src={oa.cover} alt=\"\" />\n      <div className={`${owlClass}__shop`}>\n        <div className={`${owlClass}__shop__left`}>\n          <div className={`${owlClass}__shop__left__avatar`}>\n            <img src={oa.avatar} alt=\"\" />\n          </div>\n          <div className={`${owlClass}__shop__left__info`}>\n            <div className={`${owlClass}__shop__left__info__company`}>\n              <h1 className={`${owlClass}__shop__left__info__company__name`}>\n                {oa.name}\n              </h1>\n              {oa.is_verified &&\n                <img\n                  className={`${owlClass}__shop__left__info__company__verification`}\n                  src=\"https://stc-zoa-profile.zdn.vn/images/verification.svg\"\n                  alt=\"\"\n                />\n              }\n            </div>\n            {oa.cate &&\n              <span className={`${owlClass}__shop__left__info__enterprise`}>\n                {LangUtil.getCateName(oa.cate)}\n              </span>\n            }\n          </div>\n        </div>\n        {!isEmpty &&\n          <ThreeDots\n            isFollowed={isFollowed}\n            onOpenPopupUnFollow={onOpenPopupUnFollow}\n            oaid={oa.oaid}\n            name={oa.name}\n            isShowCallBtn={isShowCallBtn}\n            msgCall={oa.call_msg}\n          />\n        }\n      </div>\n      {errorMsg.error < 0 && <ErrorPopup open={errorMsg.error < 0} msg={errorMsg.msg} onCloseModal={() => { setErrorMsg({ error: 0, msg: '' }) }} />}\n      {isShowOutappPopup && <OutAppPopup open={isShowOutappPopup} onCloseModal={() => { setIsShowOutappPopup(false) }} onAgree={() => { onAgreeOpenZalo(oa.oaid) }} />}\n      {isEmpty && <Empty openProfileOA={() => setIsEmpty(false)} />}\n      {!isEmpty && (\n        <>\n          <div className={`${owlClass}__group-btn`}>\n            <div onClick={() => { sendMsg(oa.oaid) }} className={`${owlClass}__group-btn__item`}>{LangUtil.get('btn-label-send-msg')}</div>\n            {isFollowed ? (\n              <>\n                <div\n                  className={`${owlClass}__group-btn__item followed`}\n                  onClick={onOpenPopupUnFollow}\n                >\n                  <img\n                    style={{ width: '50px', height: '40px' }}\n                    src=\"https://stc-zoa-profile.zdn.vn/images/followed.svg\"\n                    alt=\"\"\n                  />\n                </div>\n                <Popup\n                  oaName={oa.name}\n                  open={isOpenPopupUnFollow}\n                  onCloseModal={onClosePopupUnFollow}\n                  onAgree={() => {\n                    onClosePopupUnFollow();\n                    unfollowOA(oa.oaid)\n                  }}\n                />\n              </>\n            ) : (\n              <div\n                className={`${owlClass}__group-btn__item follow`}\n                onClick={() => followOA(oa.oaid, '')}\n              >\n                {LangUtil.get('label-follow-oa')}\n              </div>\n            )}\n          </div>\n          <div className={`${owlClass}__detail`}>\n            {oa.address &&\n\n              <div className={`${owlClass}__detail__item`}>\n                <img\n                  src=\"https://stc-zoa-profile.zdn.vn/images/location.svg\"\n                  alt=\"\"\n                  onClick={() =>\n                    setIsShowCertificationText(!isShowCertificationText)\n                  }\n                />\n                <p className={`${owlClass}__detail__item__text`}>\n                  {oa.address.name}\n                </p>\n              </div>\n            }\n            {oa.phone &&\n              <div className={`${owlClass}__detail__item`}>\n                <img\n                  src=\"https://stc-zoa-profile.zdn.vn/images/phone.svg\"\n                  alt=\"\"\n                />\n                <p onClick={() => window.open(`tel:${oa.phone}`)} className={`${owlClass}__detail__item__text primary`}>\n                  {oa.phone}\n                </p>\n              </div>\n            }\n          </div>\n          {oa.articles && <ListArticle oaid={oa.oaid} data={oa.articles} />}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
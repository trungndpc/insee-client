{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateUniqueString = exports.getZaloVersion = exports.checkPlatform = exports.getUserAgent = exports.getToken = exports.isFunction = exports.serialize = exports.isZaloBrowser = exports.parseJSON = exports.isString = exports.isEmpty = exports.isObject = exports.readCookieFallback = exports.writeCookie = exports.readCookie = void 0;\n\nconst Cookies = require(\"js-cookie\");\n\nexports.readCookie = name => {\n  const ckString = document.cookie;\n\n  if (ckString) {\n    const listCookie = ckString.split(\"; \");\n\n    if (listCookie && listCookie.length > 0) {\n      var nameLen = name.length + 1;\n\n      for (var i = listCookie.length - 1; i >= 0; i--) {\n        let item = listCookie[i];\n\n        if (item && item.indexOf(name) === 0) {\n          item = item.substring(nameLen, item.length);\n\n          if (item) {\n            item = item.replace(/[\"']/g, \"\");\n            return item;\n          }\n        }\n      }\n    }\n  }\n\n  return null;\n};\n\nexports.writeCookie = (name, value, path, domain, expires, secure) => {\n  try {\n    const expiresTime = new Date();\n    expiresTime.setSeconds(expiresTime.getSeconds() + expires);\n    Cookies.set(name, value, {\n      path: path,\n      domain: domain,\n      expires: expiresTime,\n      secure: secure\n    });\n  } catch (error) {\n    console.error(\"Fail to set cookie\");\n  }\n};\n\nconst getCurrHost = () => {\n  const curr = window.location.host; // if (curr) {\n  //     if (curr.indexOf(\"www.\") === 0) {\n  //         return curr.replace(\"www.\", \"\") + \"_\";\n  //     } else {\n  //         return curr + \"_\";\n  //     }\n  // }\n\n  return `${curr}_`;\n};\n\nconst getCurrHostRootZaloMe = () => {\n  const curr = window.location.host;\n\n  if (curr) {\n    if (curr.indexOf(\"zalo.me\") >= 0) {\n      return \"zalo.me_\";\n    } else if (curr.indexOf(\"baomoi.com\") >= 0) {\n      return \"baomoi.com_\";\n    } else if (curr.indexOf(\"mp3.zing.vn\") >= 0) {\n      return \"mp3.zing.vn_\";\n    } else if (curr.indexOf(\"zaloapp.com\") >= 0) {\n      return \"zaloapp.com_\";\n    }\n  }\n\n  return \"\";\n};\n\nconst readCookieByDomain = name => {\n  return exports.readCookie(getCurrHost() + name);\n};\n\nconst readCookieByRootDomain = name => {\n  return exports.readCookie(getCurrHostRootZaloMe() + name);\n};\n\nexports.readCookieFallback = name => {\n  let ck = readCookieByDomain(name);\n\n  if (!ck) {\n    ck = readCookieByRootDomain(name);\n\n    if (!ck) {\n      return exports.readCookie(name);\n    }\n  }\n\n  return ck;\n};\n\nexports.isObject = obj => {\n  return typeof obj === \"object\";\n};\n\nexports.isEmpty = str => {\n  return !str || 0 === str.trim().length;\n};\n\nexports.isString = obj => {\n  if (typeof obj === \"string\") {\n    return true;\n  }\n\n  if (obj === undefined || obj === null) {\n    return false;\n  }\n\n  if (typeof obj !== \"object\") {\n    return false;\n  }\n\n  if (!obj.constructor) {\n    return false;\n  }\n\n  return obj.constructor.toString().match(/string/i) !== null;\n};\n\nexports.parseJSON = str => {\n  const formattedStr = str.replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/\\t/g, \"\\\\t\");\n\n  if (exports.isObject(JSON) && JSON.parse && exports.isString(str)) {\n    return JSON.parse(formattedStr, (key, value) => {\n      return value;\n    });\n  } else if (typeof str === \"object\") {\n    return str;\n  } else {\n    return new Function(\"return \" + str)();\n  }\n};\n\nexports.isZaloBrowser = () => {\n  const uAgent = window.navigator.userAgent;\n  return uAgent.includes(\"Zalo\");\n};\n\nexports.serialize = data => {\n  if (exports.isObject(JSON) && JSON.stringify) {\n    return JSON.stringify(data);\n  }\n\n  if (data === undefined) {\n    return \"undefined\";\n  }\n\n  if (data === null) {\n    return \"null\";\n  }\n\n  try {\n    if (typeof data === \"string\" || data.constructor.toString().match(/string/i) !== null) {\n      return '\"' + data.replace(/\"/g, '\\\\\"') + '\"';\n    }\n  } catch (e) {\n    console.log(e);\n  }\n\n  var a;\n\n  if (Object.prototype.toString.call(data).match(/array/i) !== null) {\n    a = new Array();\n    var length = data.length;\n\n    for (var i = 0; i < length; i++) {\n      a.push(exports.serialize(data[i]));\n    }\n\n    return \"[\" + a.join(\",\") + \"]\";\n  }\n\n  if (typeof data === \"object\") {\n    a = new Array();\n\n    for (var f in data) {\n      a.push('\"' + f + '\":' + exports.serialize(data[f]));\n    }\n\n    return \"{\" + a.join(\",\") + \"}\";\n  }\n\n  return data.toString();\n};\n\nexports.isFunction = value => {\n  return typeof value === \"function\";\n};\n\nexports.getToken = name => {\n  return exports.readCookieFallback(name);\n};\n\nexports.getUserAgent = () => navigator.userAgent || navigator.vendor || window.opera;\n\nexports.checkPlatform = () => {\n  const _agent = exports.getUserAgent().toLowerCase();\n\n  return {\n    isWP: /iemobile/.test(_agent),\n    isAndroid: /android/i.test(_agent) && !/iemobile/.test(_agent),\n    isIOS: /iphone|ipad|ipod/.test(_agent) && !/iemobile/.test(_agent),\n    isMobile: /android|iphone|ipad|ipod|iemobile/.test(_agent)\n  };\n};\n\nexports.getZaloVersion = () => exports.readCookie(\"zversion\");\n\nconst REGEXP_SPECIAL_UNICODE = new RegExp(\"[\\\\u0300-\\\\u036f]\", \"g\");\nconst REGEXP_ACCENT_D = new RegExp(\"[đ|Đ]\", \"g\");\nconst REGEXP_SPACES = new RegExp(\"\\\\s\", \"g\");\n/**\n * Generate a unique string from a input string by:\n * 1. Remove accents from input string\n * 2. Remove all spaces\n * 3. Lower case\n * 4. Concat with a random string\n * @param {string} str\n * @returns unique string\n */\n\nexports.generateUniqueString = (str = \"\") => {\n  const RANDOM_STRING_LENGTH = 4;\n  const formattedStr = str.normalize(\"NFD\").replace(REGEXP_SPECIAL_UNICODE, \"\").replace(REGEXP_ACCENT_D, \"d\").replace(REGEXP_SPACES, \"\").toLowerCase();\n  return `${formattedStr}_${Math.random().toString(36).substr(2, RANDOM_STRING_LENGTH)}`;\n};","map":{"version":3,"sources":["/home/trungnd2/Downloads/insee-client/node_modules/zalo-js-bridge/lib/utils/common.js"],"names":["Object","defineProperty","exports","value","generateUniqueString","getZaloVersion","checkPlatform","getUserAgent","getToken","isFunction","serialize","isZaloBrowser","parseJSON","isString","isEmpty","isObject","readCookieFallback","writeCookie","readCookie","Cookies","require","name","ckString","document","cookie","listCookie","split","length","nameLen","i","item","indexOf","substring","replace","path","domain","expires","secure","expiresTime","Date","setSeconds","getSeconds","set","error","console","getCurrHost","curr","window","location","host","getCurrHostRootZaloMe","readCookieByDomain","readCookieByRootDomain","ck","obj","str","trim","undefined","constructor","toString","match","formattedStr","JSON","parse","key","Function","uAgent","navigator","userAgent","includes","data","stringify","e","log","a","prototype","call","Array","push","join","f","vendor","opera","_agent","toLowerCase","isWP","test","isAndroid","isIOS","isMobile","REGEXP_SPECIAL_UNICODE","RegExp","REGEXP_ACCENT_D","REGEXP_SPACES","RANDOM_STRING_LENGTH","normalize","Math","random","substr"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUniqueString = exports.getZaloVersion = exports.checkPlatform = exports.getUserAgent = exports.getToken = exports.isFunction = exports.serialize = exports.isZaloBrowser = exports.parseJSON = exports.isString = exports.isEmpty = exports.isObject = exports.readCookieFallback = exports.writeCookie = exports.readCookie = void 0;\nconst Cookies = require(\"js-cookie\");\nexports.readCookie = (name) => {\n    const ckString = document.cookie;\n    if (ckString) {\n        const listCookie = ckString.split(\"; \");\n        if (listCookie && listCookie.length > 0) {\n            var nameLen = name.length + 1;\n            for (var i = listCookie.length - 1; i >= 0; i--) {\n                let item = listCookie[i];\n                if (item && item.indexOf(name) === 0) {\n                    item = item.substring(nameLen, item.length);\n                    if (item) {\n                        item = item.replace(/[\"']/g, \"\");\n                        return item;\n                    }\n                }\n            }\n        }\n    }\n    return null;\n};\nexports.writeCookie = (name, value, path, domain, expires, secure) => {\n    try {\n        const expiresTime = new Date();\n        expiresTime.setSeconds(expiresTime.getSeconds() + expires);\n        Cookies.set(name, value, {\n            path: path,\n            domain: domain,\n            expires: expiresTime,\n            secure: secure,\n        });\n    }\n    catch (error) {\n        console.error(\"Fail to set cookie\");\n    }\n};\nconst getCurrHost = () => {\n    const curr = window.location.host;\n    // if (curr) {\n    //     if (curr.indexOf(\"www.\") === 0) {\n    //         return curr.replace(\"www.\", \"\") + \"_\";\n    //     } else {\n    //         return curr + \"_\";\n    //     }\n    // }\n    return `${curr}_`;\n};\nconst getCurrHostRootZaloMe = () => {\n    const curr = window.location.host;\n    if (curr) {\n        if (curr.indexOf(\"zalo.me\") >= 0) {\n            return \"zalo.me_\";\n        }\n        else if (curr.indexOf(\"baomoi.com\") >= 0) {\n            return \"baomoi.com_\";\n        }\n        else if (curr.indexOf(\"mp3.zing.vn\") >= 0) {\n            return \"mp3.zing.vn_\";\n        }\n        else if (curr.indexOf(\"zaloapp.com\") >= 0) {\n            return \"zaloapp.com_\";\n        }\n    }\n    return \"\";\n};\nconst readCookieByDomain = (name) => {\n    return exports.readCookie(getCurrHost() + name);\n};\nconst readCookieByRootDomain = (name) => {\n    return exports.readCookie(getCurrHostRootZaloMe() + name);\n};\nexports.readCookieFallback = (name) => {\n    let ck = readCookieByDomain(name);\n    if (!ck) {\n        ck = readCookieByRootDomain(name);\n        if (!ck) {\n            return exports.readCookie(name);\n        }\n    }\n    return ck;\n};\nexports.isObject = (obj) => {\n    return typeof obj === \"object\";\n};\nexports.isEmpty = (str) => {\n    return !str || 0 === str.trim().length;\n};\nexports.isString = (obj) => {\n    if (typeof obj === \"string\") {\n        return true;\n    }\n    if (obj === undefined || obj === null) {\n        return false;\n    }\n    if (typeof obj !== \"object\") {\n        return false;\n    }\n    if (!obj.constructor) {\n        return false;\n    }\n    return obj.constructor.toString().match(/string/i) !== null;\n};\nexports.parseJSON = (str) => {\n    const formattedStr = str.replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/\\t/g, \"\\\\t\");\n    if (exports.isObject(JSON) && JSON.parse && exports.isString(str)) {\n        return JSON.parse(formattedStr, (key, value) => {\n            return value;\n        });\n    }\n    else if (typeof str === \"object\") {\n        return str;\n    }\n    else {\n        return new Function(\"return \" + str)();\n    }\n};\nexports.isZaloBrowser = () => {\n    const uAgent = window.navigator.userAgent;\n    return uAgent.includes(\"Zalo\");\n};\nexports.serialize = (data) => {\n    if (exports.isObject(JSON) && JSON.stringify) {\n        return JSON.stringify(data);\n    }\n    if (data === undefined) {\n        return \"undefined\";\n    }\n    if (data === null) {\n        return \"null\";\n    }\n    try {\n        if (typeof data === \"string\" ||\n            data.constructor.toString().match(/string/i) !== null) {\n            return '\"' + data.replace(/\"/g, '\\\\\"') + '\"';\n        }\n    }\n    catch (e) {\n        console.log(e);\n    }\n    var a;\n    if (Object.prototype.toString.call(data).match(/array/i) !== null) {\n        a = new Array();\n        var length = data.length;\n        for (var i = 0; i < length; i++) {\n            a.push(exports.serialize(data[i]));\n        }\n        return \"[\" + a.join(\",\") + \"]\";\n    }\n    if (typeof data === \"object\") {\n        a = new Array();\n        for (var f in data) {\n            a.push('\"' + f + '\":' + exports.serialize(data[f]));\n        }\n        return \"{\" + a.join(\",\") + \"}\";\n    }\n    return data.toString();\n};\nexports.isFunction = (value) => {\n    return typeof value === \"function\";\n};\nexports.getToken = (name) => {\n    return exports.readCookieFallback(name);\n};\nexports.getUserAgent = () => navigator.userAgent || navigator.vendor || window.opera;\nexports.checkPlatform = () => {\n    const _agent = exports.getUserAgent().toLowerCase();\n    return {\n        isWP: /iemobile/.test(_agent),\n        isAndroid: /android/i.test(_agent) && !/iemobile/.test(_agent),\n        isIOS: /iphone|ipad|ipod/.test(_agent) && !/iemobile/.test(_agent),\n        isMobile: /android|iphone|ipad|ipod|iemobile/.test(_agent),\n    };\n};\nexports.getZaloVersion = () => exports.readCookie(\"zversion\");\nconst REGEXP_SPECIAL_UNICODE = new RegExp(\"[\\\\u0300-\\\\u036f]\", \"g\");\nconst REGEXP_ACCENT_D = new RegExp(\"[đ|Đ]\", \"g\");\nconst REGEXP_SPACES = new RegExp(\"\\\\s\", \"g\");\n/**\n * Generate a unique string from a input string by:\n * 1. Remove accents from input string\n * 2. Remove all spaces\n * 3. Lower case\n * 4. Concat with a random string\n * @param {string} str\n * @returns unique string\n */\nexports.generateUniqueString = (str = \"\") => {\n    const RANDOM_STRING_LENGTH = 4;\n    const formattedStr = str\n        .normalize(\"NFD\")\n        .replace(REGEXP_SPECIAL_UNICODE, \"\")\n        .replace(REGEXP_ACCENT_D, \"d\")\n        .replace(REGEXP_SPACES, \"\")\n        .toLowerCase();\n    return `${formattedStr}_${Math.random()\n        .toString(36)\n        .substr(2, RANDOM_STRING_LENGTH)}`;\n};\n"]},"metadata":{},"sourceType":"script"}
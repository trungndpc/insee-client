{"ast":null,"code":"import _slicedToArray from\"/home/trungnd2/Documents/project/new/insee-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import PostModel from\"./model/PostModel\";import StockFormModel from\"./model/StockFormModel\";import RealtimePhotoWidget from\"./widget/RealtimePhotoWidget\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var owlClass=\"App\";function PostPage(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenRealtimePopup=_useState4[0],setIsOpenRealtimePopup=_useState4[1];var fetchPost=function fetchPost(id){PostModel.get(id).then(function(resp){if(resp.error==0){setPost(resp.data);}});};var createStockPromotion=function createStockPromotion(form){StockFormModel.create(form).then(function(resp){if(resp.error==0){window.location.href=\"/#ls\";}});};useEffect(function(){fetchPost(id);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:owlClass,children:[/*#__PURE__*/_jsx(RealtimePhotoWidget,{open:isOpenRealtimePopup,onClose:function onClose(data){var realtimePhoto=data;var form={promotionId:post.promotionId,detail:JSON.stringify(realtimePhoto)};createStockPromotion(form);setIsOpenRealtimePopup(false);}}),/*#__PURE__*/_jsx(\"img\",{className:\"\".concat(owlClass,\"__image\"),src:post===null||post===void 0?void 0:post.cover,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(owlClass,\"__detail bv-content\"),children:[/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:\"\".concat(post===null||post===void 0?void 0:post.content)}}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){setIsOpenRealtimePopup(true);},className:\"Register__content__group-btn\",children:\"G\\u1EEDi h\\xECnh\"})]})]});}export default PostPage;","map":{"version":3,"sources":["/home/trungnd2/Documents/project/new/insee-client/src/PostPage.tsx"],"names":["useEffect","useState","useParams","PostModel","StockFormModel","RealtimePhotoWidget","owlClass","PostPage","id","post","setPost","isOpenRealtimePopup","setIsOpenRealtimePopup","fetchPost","get","then","resp","error","data","createStockPromotion","form","create","window","location","href","realtimePhoto","promotionId","detail","JSON","stringify","cover","__html","content"],"mappings":"wKAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,wBAA3B,CACA,MAAOC,CAAAA,mBAAP,KAAgC,8BAAhC,C,wFACA,GAAMC,CAAAA,QAAQ,CAAG,KAAjB,CAGA,QAASC,CAAAA,QAAT,EAAoB,gBACHL,SAAS,EADN,CACVM,EADU,YACVA,EADU,eAEQP,QAAQ,EAFhB,wCAETQ,IAFS,eAEHC,OAFG,8BAGsCT,QAAQ,CAAC,KAAD,CAH9C,yCAGTU,mBAHS,eAGYC,sBAHZ,eAKhB,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACL,EAAD,CAAa,CAC3BL,SAAS,CAACW,GAAV,CAAcN,EAAd,EACKO,IADL,CACU,SAAAC,IAAI,CAAI,CACV,GAAIA,IAAI,CAACC,KAAL,EAAc,CAAlB,CAAqB,CACjBP,OAAO,CAACM,IAAI,CAACE,IAAN,CAAP,CACH,CACJ,CALL,EAMH,CAPD,CASA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,IAAD,CAAqB,CAC9ChB,cAAc,CAACiB,MAAf,CAAsBD,IAAtB,EACKL,IADL,CACU,SAAAC,IAAI,CAAI,CACV,GAAIA,IAAI,CAACC,KAAL,EAAc,CAAlB,CAAqB,CACjBK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,MAAvB,CACH,CACJ,CALL,EAMH,CAPD,CASAxB,SAAS,CAAC,UAAM,CACZa,SAAS,CAACL,EAAD,CAAT,CACH,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACI,aAAK,SAAS,CAAEF,QAAhB,wBACI,KAAC,mBAAD,EAAqB,IAAI,CAAEK,mBAA3B,CAAgD,OAAO,CAAE,iBAACO,IAAD,CAAe,CACpE,GAAIO,CAAAA,aAA+B,CAAGP,IAAtC,CACA,GAAIE,CAAAA,IAAe,CAAG,CAClBM,WAAW,CAAEjB,IAAI,CAAEiB,WADD,CAElBC,MAAM,CAAEC,IAAI,CAACC,SAAL,CAAeJ,aAAf,CAFU,CAAtB,CAIAN,oBAAoB,CAACC,IAAD,CAApB,CACAR,sBAAsB,CAAC,KAAD,CAAtB,CACH,CARD,EADJ,cAUI,YAAK,SAAS,WAAKN,QAAL,WAAd,CAAsC,GAAG,CAAEG,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEqB,KAAjD,CAAwD,GAAG,CAAC,EAA5D,EAVJ,cAWI,aAAK,SAAS,WAAKxB,QAAL,uBAAd,wBACI,YAAK,uBAAuB,CAAE,CAAEyB,MAAM,WAAKtB,IAAL,SAAKA,IAAL,iBAAKA,IAAI,CAAEuB,OAAX,CAAR,CAA9B,EADJ,cAGI,YAAK,OAAO,CAAE,kBAAM,CAAEpB,sBAAsB,CAAC,IAAD,CAAtB,CAA8B,CAApD,CAAsD,SAAS,CAAC,8BAAhE,8BAHJ,GAXJ,GADJ,CAoBH,CAED,cAAeL,CAAAA,QAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ImgRealtimePhoto, Post, StockForm } from \"./interface\";\nimport PostModel from \"./model/PostModel\";\nimport StockFormModel from \"./model/StockFormModel\";\nimport RealtimePhotoWidget from \"./widget/RealtimePhotoWidget\";\nconst owlClass = \"App\";\n\n\nfunction PostPage() {\n    let { id } = useParams()\n    const [post, setPost] = useState<Post>()\n    const [isOpenRealtimePopup, setIsOpenRealtimePopup] = useState(false)\n\n    const fetchPost = (id: any) => {\n        PostModel.get(id)\n            .then(resp => {\n                if (resp.error == 0) {\n                    setPost(resp.data);\n                }\n            })\n    }\n\n    const createStockPromotion = (form: StockForm) => {\n        StockFormModel.create(form)\n            .then(resp => {\n                if (resp.error == 0) {\n                    window.location.href = \"/#ls\"\n                }\n            })\n    }\n\n    useEffect(() => {\n        fetchPost(id)\n    }, [])\n\n    return (\n        <div className={owlClass}>\n            <RealtimePhotoWidget open={isOpenRealtimePopup} onClose={(data: any) => {\n                let realtimePhoto: ImgRealtimePhoto = data;\n                let form: StockForm = {\n                    promotionId: post!.promotionId,\n                    detail: JSON.stringify(realtimePhoto)\n                }\n                createStockPromotion(form)\n                setIsOpenRealtimePopup(false)\n            }} />\n            <img className={`${owlClass}__image`} src={post?.cover} alt=\"\" />\n            <div className={`${owlClass}__detail bv-content`}>\n                <div dangerouslySetInnerHTML={{ __html: `${post?.content}` }}>\n                </div>\n                <div onClick={() => { setIsOpenRealtimePopup(true) }} className=\"Register__content__group-btn\">Gửi hình</div>\n            </div>\n\n        </div>\n    )\n}\n\nexport default PostPage;"]},"metadata":{},"sourceType":"module"}
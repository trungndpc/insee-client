{"ast":null,"code":"import _slicedToArray from\"/home/trungnd2/Documents/project/new/insee-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{STOCK_PROMOTION_TYPE}from\"./constant/PromotionType\";import PostModel from\"./model/PostModel\";import PromotionModel from\"./model/PromotionModel\";import StockFormModel from\"./model/StockFormModel\";import RealtimePhotoWidget from\"./widget/RealtimePhotoWidget\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var owlClass=\"App\";function PostPage(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenRealtimePopup=_useState4[0],setIsOpenRealtimePopup=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),promotion=_useState6[0],setPromotion=_useState6[1];var fetchPromotion=function fetchPromotion(promotionId){PromotionModel.get(promotionId).then(function(resp){if(resp.error==0){setPromotion(resp.data);}});};var fetchPost=function fetchPost(id){PostModel.get(id).then(function(resp){if(resp.error==0){setPost(resp.data);fetchPromotion(resp.data.promotionId);}});};var createStockPromotion=function createStockPromotion(form){StockFormModel.create(form).then(function(resp){if(resp.error==0){window.location.href=\"/#ls\";}});};useEffect(function(){fetchPost(id);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:owlClass,children:[/*#__PURE__*/_jsx(\"img\",{className:\"\".concat(owlClass,\"__image\"),src:post===null||post===void 0?void 0:post.cover,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(owlClass,\"__detail bv-content\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"sticky-bottom-content\",dangerouslySetInnerHTML:{__html:\"\".concat(post===null||post===void 0?void 0:post.content)}}),promotion&&promotion.type==STOCK_PROMOTION_TYPE&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){setIsOpenRealtimePopup(true);},className:\"Register__content__group-btn sticky-bottom\",children:\"G\\u1EEDi h\\xECnh\"}),/*#__PURE__*/_jsx(RealtimePhotoWidget,{open:isOpenRealtimePopup,onClose:function onClose(){setIsOpenRealtimePopup(false);},onSubmit:function onSubmit(data){var realtimePhoto=data;var form={promotionId:post.promotionId,detail:JSON.stringify(realtimePhoto)};createStockPromotion(form);setIsOpenRealtimePopup(false);}})]})]})]});}export default PostPage;","map":{"version":3,"sources":["/home/trungnd2/Documents/project/new/insee-client/src/PostPage.tsx"],"names":["useEffect","useState","useParams","STOCK_PROMOTION_TYPE","PostModel","PromotionModel","StockFormModel","RealtimePhotoWidget","owlClass","PostPage","id","post","setPost","isOpenRealtimePopup","setIsOpenRealtimePopup","promotion","setPromotion","fetchPromotion","promotionId","get","then","resp","error","data","fetchPost","createStockPromotion","form","create","window","location","href","cover","__html","content","type","realtimePhoto","detail","JSON","stringify"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { STOCK_PROMOTION_TYPE } from \"./constant/PromotionType\";\nimport { ImgRealtimePhoto, Post, Promotion, StockForm } from \"./interface\";\nimport PostModel from \"./model/PostModel\";\nimport PromotionModel from \"./model/PromotionModel\";\nimport StockFormModel from \"./model/StockFormModel\";\nimport RealtimePhotoWidget from \"./widget/RealtimePhotoWidget\";\nconst owlClass = \"App\";\n\n\nfunction PostPage() {\n    let { id } = useParams()\n    const [post, setPost] = useState<Post>()\n    const [isOpenRealtimePopup, setIsOpenRealtimePopup] = useState(false)\n    const [promotion, setPromotion] = useState<Promotion>()\n\n    const fetchPromotion = (promotionId: any) => {\n        PromotionModel.get(promotionId)\n            .then(resp => {\n                if (resp.error == 0) {\n                    setPromotion(resp.data)\n                }\n            })\n    }\n\n    const fetchPost = (id: any) => {\n        PostModel.get(id)\n            .then(resp => {\n                if (resp.error == 0) {\n                    setPost(resp.data);\n                    fetchPromotion(resp.data.promotionId)\n                }\n            })\n    }\n\n    const createStockPromotion = (form: StockForm) => {\n        StockFormModel.create(form)\n            .then(resp => {\n                if (resp.error == 0) {\n                    window.location.href = \"/#ls\"\n                }\n            })\n    }\n\n    useEffect(() => {\n        fetchPost(id)\n    }, [])\n\n    return (\n        <div className={owlClass}>\n\n            <img className={`${owlClass}__image`} src={post?.cover} alt=\"\" />\n            <div className={`${owlClass}__detail bv-content`}>\n                <div className=\"sticky-bottom-content\" dangerouslySetInnerHTML={{ __html: `${post?.content}` }}>\n                </div>\n                {promotion && promotion.type == STOCK_PROMOTION_TYPE &&\n                    <>\n                        <div onClick={() => { setIsOpenRealtimePopup(true) }} className=\"Register__content__group-btn sticky-bottom\">Gửi hình</div>\n                        <RealtimePhotoWidget open={isOpenRealtimePopup} onClose={() => {\n                            setIsOpenRealtimePopup(false)\n                        }} \n                        onSubmit={(data: any) => {\n                            let realtimePhoto: ImgRealtimePhoto = data;\n                            let form: StockForm = {\n                                promotionId: post!.promotionId,\n                                detail: JSON.stringify(realtimePhoto)\n                            }\n                            createStockPromotion(form)\n                            setIsOpenRealtimePopup(false)\n                        }} />\n                    </>\n                }\n            </div>\n\n        </div>\n    )\n}\n\nexport default PostPage;"]},"metadata":{},"sourceType":"module"}